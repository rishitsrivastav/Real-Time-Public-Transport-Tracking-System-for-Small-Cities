{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":76,"index":76}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"]}},{"name":"./ExpoTaskManager","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":77},"end":{"line":2,"column":48,"index":125}}],"key":"XuoplolDboh/CUTNxf5WfqS0FBQ=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.defineTask = defineTask;\n  exports.getRegisteredTasksAsync = getRegisteredTasksAsync;\n  exports.getTaskOptionsAsync = getTaskOptionsAsync;\n  exports.isAvailableAsync = isAvailableAsync;\n  exports.isTaskDefined = isTaskDefined;\n  exports.isTaskRegisteredAsync = isTaskRegisteredAsync;\n  exports.unregisterAllTasksAsync = unregisterAllTasksAsync;\n  exports.unregisterTaskAsync = unregisterTaskAsync;\n  var _expoModulesCore = require(_dependencyMap[1], \"expo-modules-core\");\n  var _ExpoTaskManager = _interopRequireDefault(require(_dependencyMap[2], \"./ExpoTaskManager\"));\n  const tasks = new Map();\n  function _validate(taskName) {\n    if (!taskName || typeof taskName !== 'string') {\n      throw new TypeError('`taskName` must be a non-empty string.');\n    }\n  }\n  // @needsAudit\n  /**\n   * Defines task function. It must be called in the global scope of your JavaScript bundle.\n   * In particular, it cannot be called in any of React lifecycle methods like `componentDidMount`.\n   * This limitation is due to the fact that when the application is launched in the background,\n   * we need to spin up your JavaScript app, run your task and then shut down â€” no views are mounted\n   * in this scenario.\n   *\n   * @param taskName Name of the task. It must be the same as the name you provided when registering the task.\n   * @param taskExecutor A function that will be invoked when the task with given `taskName` is executed.\n   */\n  function defineTask(taskName, taskExecutor) {\n    if (!taskName || typeof taskName !== 'string') {\n      console.warn(`TaskManager.defineTask: 'taskName' argument must be a non-empty string.`);\n      return;\n    }\n    if (!taskExecutor || typeof taskExecutor !== 'function') {\n      console.warn(`TaskManager.defineTask: 'task' argument must be a function.`);\n      return;\n    }\n    tasks.set(taskName, taskExecutor);\n  }\n  // @needsAudit\n  /**\n   * Checks whether the task is already defined.\n   *\n   * @param taskName Name of the task.\n   */\n  function isTaskDefined(taskName) {\n    return tasks.has(taskName);\n  }\n  // @needsAudit\n  /**\n   * Determine whether the task is registered. Registered tasks are stored in a persistent storage and\n   * preserved between sessions.\n   *\n   * @param taskName Name of the task.\n   * @returns A promise which resolves to `true` if a task with the given name is registered, otherwise `false`.\n   */\n  async function isTaskRegisteredAsync(taskName) {\n    if (!_ExpoTaskManager.default.isTaskRegisteredAsync) {\n      throw new _expoModulesCore.UnavailabilityError('TaskManager', 'isTaskRegisteredAsync');\n    }\n    _validate(taskName);\n    return _ExpoTaskManager.default.isTaskRegisteredAsync(taskName);\n  }\n  // @needsAudit\n  /**\n   * Retrieves `options` associated with the task, that were passed to the function registering the task\n   * (e.g. `Location.startLocationUpdatesAsync`).\n   *\n   * @param taskName Name of the task.\n   * @return A promise which fulfills with the `options` object that was passed while registering task\n   * with given name or `null` if task couldn't be found.\n   */\n  async function getTaskOptionsAsync(taskName) {\n    if (!_ExpoTaskManager.default.getTaskOptionsAsync) {\n      throw new _expoModulesCore.UnavailabilityError('TaskManager', 'getTaskOptionsAsync');\n    }\n    _validate(taskName);\n    return _ExpoTaskManager.default.getTaskOptionsAsync(taskName);\n  }\n  // @needsAudit\n  /**\n   * Provides information about tasks registered in the app.\n   *\n   * @returns A promise which fulfills with an array of tasks registered in the app.\n   * @example\n   * ```js\n   * [\n   *   {\n   *     taskName: 'location-updates-task-name',\n   *     taskType: 'location',\n   *     options: {\n   *       accuracy: Location.Accuracy.High,\n   *       showsBackgroundLocationIndicator: false,\n   *     },\n   *   },\n   *   {\n   *     taskName: 'geofencing-task-name',\n   *     taskType: 'geofencing',\n   *     options: {\n   *       regions: [...],\n   *     },\n   *   },\n   * ]\n   * ```\n   */\n  async function getRegisteredTasksAsync() {\n    if (!_ExpoTaskManager.default.getRegisteredTasksAsync) {\n      throw new _expoModulesCore.UnavailabilityError('TaskManager', 'getRegisteredTasksAsync');\n    }\n    return _ExpoTaskManager.default.getRegisteredTasksAsync();\n  }\n  // @needsAudit\n  /**\n   * Unregisters task from the app, so the app will not be receiving updates for that task anymore.\n   * _It is recommended to use methods specialized by modules that registered the task, eg.\n   * [`Location.stopLocationUpdatesAsync`](./location/#expolocationstoplocationupdatesasynctaskname)._\n   *\n   * @param taskName Name of the task to unregister.\n   * @return A promise which fulfills as soon as the task is unregistered.\n   */\n  async function unregisterTaskAsync(taskName) {\n    if (!_ExpoTaskManager.default.unregisterTaskAsync) {\n      throw new _expoModulesCore.UnavailabilityError('TaskManager', 'unregisterTaskAsync');\n    }\n    _validate(taskName);\n    await _ExpoTaskManager.default.unregisterTaskAsync(taskName);\n  }\n  // @needsAudit\n  /**\n   * Unregisters all tasks registered for the running app. You may want to call this when the user is\n   * signing out and you no longer need to track his location or run any other background tasks.\n   * @return A promise which fulfills as soon as all tasks are completely unregistered.\n   */\n  async function unregisterAllTasksAsync() {\n    if (!_ExpoTaskManager.default.unregisterAllTasksAsync) {\n      throw new _expoModulesCore.UnavailabilityError('TaskManager', 'unregisterAllTasksAsync');\n    }\n    await _ExpoTaskManager.default.unregisterAllTasksAsync();\n  }\n  if (_ExpoTaskManager.default) {\n    const eventEmitter = new _expoModulesCore.LegacyEventEmitter(_ExpoTaskManager.default);\n    eventEmitter.addListener(_ExpoTaskManager.default.EVENT_NAME, async ({\n      data,\n      error,\n      executionInfo\n    }) => {\n      const {\n        eventId,\n        taskName\n      } = executionInfo;\n      const taskExecutor = tasks.get(taskName);\n      let result = null;\n      if (taskExecutor) {\n        try {\n          // Execute JS task\n          result = await taskExecutor({\n            data,\n            error,\n            executionInfo\n          });\n        } catch (error) {\n          console.error(`TaskManager: Task \"${taskName}\" failed:`, error);\n        } finally {\n          // Notify manager the task is finished.\n          await _ExpoTaskManager.default.notifyTaskFinishedAsync(taskName, {\n            eventId,\n            result\n          });\n        }\n      } else {\n        console.warn(`TaskManager: Task \"${taskName}\" has been executed but looks like it is not defined. Make sure that \"TaskManager.defineTask\" is called during initialization phase.`);\n        // No tasks defined -> we need to notify about finish anyway.\n        await _ExpoTaskManager.default.notifyTaskFinishedAsync(taskName, {\n          eventId,\n          result\n        });\n        // We should also unregister such tasks automatically as the task might have been removed\n        // from the app or just renamed - in that case it needs to be registered again (with the new name).\n        await _ExpoTaskManager.default.unregisterTaskAsync(taskName);\n      }\n    });\n  }\n  // @needsAudit\n  /**\n   * Determine if the `TaskManager` API can be used in this app.\n   * @return A promise which fulfills with `true` if the API can be used, and `false` otherwise.\n   * With Expo Go, `TaskManager` is not available on Android, and does not support background execution on iOS.\n   * Use a development build to avoid limitations: https://expo.fyi/dev-client.\n   * On the web, it always returns `false`.\n   */\n  async function isAvailableAsync() {\n    return _ExpoTaskManager.default.isAvailableAsync();\n  }\n});","lineCount":198,"map":[[14,2,1,0],[14,6,1,0,"_expoModulesCore"],[14,22,1,0],[14,25,1,0,"require"],[14,32,1,0],[14,33,1,0,"_dependencyMap"],[14,47,1,0],[15,2,2,0],[15,6,2,0,"_ExpoTaskManager"],[15,22,2,0],[15,25,2,0,"_interopRequireDefault"],[15,47,2,0],[15,48,2,0,"require"],[15,55,2,0],[15,56,2,0,"_dependencyMap"],[15,70,2,0],[16,2,3,0],[16,8,3,6,"tasks"],[16,13,3,11],[16,16,3,14],[16,20,3,18,"Map"],[16,23,3,21],[16,24,3,22],[16,25,3,23],[17,2,4,0],[17,11,4,9,"_validate"],[17,20,4,18,"_validate"],[17,21,4,19,"taskName"],[17,29,4,27],[17,31,4,29],[18,4,5,4],[18,8,5,8],[18,9,5,9,"taskName"],[18,17,5,17],[18,21,5,21],[18,28,5,28,"taskName"],[18,36,5,36],[18,41,5,41],[18,49,5,49],[18,51,5,51],[19,6,6,8],[19,12,6,14],[19,16,6,18,"TypeError"],[19,25,6,27],[19,26,6,28],[19,66,6,68],[19,67,6,69],[20,4,7,4],[21,2,8,0],[22,2,9,0],[23,2,10,0],[24,0,11,0],[25,0,12,0],[26,0,13,0],[27,0,14,0],[28,0,15,0],[29,0,16,0],[30,0,17,0],[31,0,18,0],[32,0,19,0],[33,2,20,7],[33,11,20,16,"defineTask"],[33,21,20,26,"defineTask"],[33,22,20,27,"taskName"],[33,30,20,35],[33,32,20,37,"taskExecutor"],[33,44,20,49],[33,46,20,51],[34,4,21,4],[34,8,21,8],[34,9,21,9,"taskName"],[34,17,21,17],[34,21,21,21],[34,28,21,28,"taskName"],[34,36,21,36],[34,41,21,41],[34,49,21,49],[34,51,21,51],[35,6,22,8,"console"],[35,13,22,15],[35,14,22,16,"warn"],[35,18,22,20],[35,19,22,21],[35,92,22,94],[35,93,22,95],[36,6,23,8],[37,4,24,4],[38,4,25,4],[38,8,25,8],[38,9,25,9,"taskExecutor"],[38,21,25,21],[38,25,25,25],[38,32,25,32,"taskExecutor"],[38,44,25,44],[38,49,25,49],[38,59,25,59],[38,61,25,61],[39,6,26,8,"console"],[39,13,26,15],[39,14,26,16,"warn"],[39,18,26,20],[39,19,26,21],[39,80,26,82],[39,81,26,83],[40,6,27,8],[41,4,28,4],[42,4,29,4,"tasks"],[42,9,29,9],[42,10,29,10,"set"],[42,13,29,13],[42,14,29,14,"taskName"],[42,22,29,22],[42,24,29,24,"taskExecutor"],[42,36,29,36],[42,37,29,37],[43,2,30,0],[44,2,31,0],[45,2,32,0],[46,0,33,0],[47,0,34,0],[48,0,35,0],[49,0,36,0],[50,2,37,7],[50,11,37,16,"isTaskDefined"],[50,24,37,29,"isTaskDefined"],[50,25,37,30,"taskName"],[50,33,37,38],[50,35,37,40],[51,4,38,4],[51,11,38,11,"tasks"],[51,16,38,16],[51,17,38,17,"has"],[51,20,38,20],[51,21,38,21,"taskName"],[51,29,38,29],[51,30,38,30],[52,2,39,0],[53,2,40,0],[54,2,41,0],[55,0,42,0],[56,0,43,0],[57,0,44,0],[58,0,45,0],[59,0,46,0],[60,0,47,0],[61,2,48,7],[61,17,48,22,"isTaskRegisteredAsync"],[61,38,48,43,"isTaskRegisteredAsync"],[61,39,48,44,"taskName"],[61,47,48,52],[61,49,48,54],[62,4,49,4],[62,8,49,8],[62,9,49,9,"ExpoTaskManager"],[62,33,49,24],[62,34,49,25,"isTaskRegisteredAsync"],[62,55,49,46],[62,57,49,48],[63,6,50,8],[63,12,50,14],[63,16,50,18,"UnavailabilityError"],[63,52,50,37],[63,53,50,38],[63,66,50,51],[63,68,50,53],[63,91,50,76],[63,92,50,77],[64,4,51,4],[65,4,52,4,"_validate"],[65,13,52,13],[65,14,52,14,"taskName"],[65,22,52,22],[65,23,52,23],[66,4,53,4],[66,11,53,11,"ExpoTaskManager"],[66,35,53,26],[66,36,53,27,"isTaskRegisteredAsync"],[66,57,53,48],[66,58,53,49,"taskName"],[66,66,53,57],[66,67,53,58],[67,2,54,0],[68,2,55,0],[69,2,56,0],[70,0,57,0],[71,0,58,0],[72,0,59,0],[73,0,60,0],[74,0,61,0],[75,0,62,0],[76,0,63,0],[77,2,64,7],[77,17,64,22,"getTaskOptionsAsync"],[77,36,64,41,"getTaskOptionsAsync"],[77,37,64,42,"taskName"],[77,45,64,50],[77,47,64,52],[78,4,65,4],[78,8,65,8],[78,9,65,9,"ExpoTaskManager"],[78,33,65,24],[78,34,65,25,"getTaskOptionsAsync"],[78,53,65,44],[78,55,65,46],[79,6,66,8],[79,12,66,14],[79,16,66,18,"UnavailabilityError"],[79,52,66,37],[79,53,66,38],[79,66,66,51],[79,68,66,53],[79,89,66,74],[79,90,66,75],[80,4,67,4],[81,4,68,4,"_validate"],[81,13,68,13],[81,14,68,14,"taskName"],[81,22,68,22],[81,23,68,23],[82,4,69,4],[82,11,69,11,"ExpoTaskManager"],[82,35,69,26],[82,36,69,27,"getTaskOptionsAsync"],[82,55,69,46],[82,56,69,47,"taskName"],[82,64,69,55],[82,65,69,56],[83,2,70,0],[84,2,71,0],[85,2,72,0],[86,0,73,0],[87,0,74,0],[88,0,75,0],[89,0,76,0],[90,0,77,0],[91,0,78,0],[92,0,79,0],[93,0,80,0],[94,0,81,0],[95,0,82,0],[96,0,83,0],[97,0,84,0],[98,0,85,0],[99,0,86,0],[100,0,87,0],[101,0,88,0],[102,0,89,0],[103,0,90,0],[104,0,91,0],[105,0,92,0],[106,0,93,0],[107,0,94,0],[108,0,95,0],[109,0,96,0],[110,2,97,7],[110,17,97,22,"getRegisteredTasksAsync"],[110,40,97,45,"getRegisteredTasksAsync"],[110,41,97,45],[110,43,97,48],[111,4,98,4],[111,8,98,8],[111,9,98,9,"ExpoTaskManager"],[111,33,98,24],[111,34,98,25,"getRegisteredTasksAsync"],[111,57,98,48],[111,59,98,50],[112,6,99,8],[112,12,99,14],[112,16,99,18,"UnavailabilityError"],[112,52,99,37],[112,53,99,38],[112,66,99,51],[112,68,99,53],[112,93,99,78],[112,94,99,79],[113,4,100,4],[114,4,101,4],[114,11,101,11,"ExpoTaskManager"],[114,35,101,26],[114,36,101,27,"getRegisteredTasksAsync"],[114,59,101,50],[114,60,101,51],[114,61,101,52],[115,2,102,0],[116,2,103,0],[117,2,104,0],[118,0,105,0],[119,0,106,0],[120,0,107,0],[121,0,108,0],[122,0,109,0],[123,0,110,0],[124,0,111,0],[125,2,112,7],[125,17,112,22,"unregisterTaskAsync"],[125,36,112,41,"unregisterTaskAsync"],[125,37,112,42,"taskName"],[125,45,112,50],[125,47,112,52],[126,4,113,4],[126,8,113,8],[126,9,113,9,"ExpoTaskManager"],[126,33,113,24],[126,34,113,25,"unregisterTaskAsync"],[126,53,113,44],[126,55,113,46],[127,6,114,8],[127,12,114,14],[127,16,114,18,"UnavailabilityError"],[127,52,114,37],[127,53,114,38],[127,66,114,51],[127,68,114,53],[127,89,114,74],[127,90,114,75],[128,4,115,4],[129,4,116,4,"_validate"],[129,13,116,13],[129,14,116,14,"taskName"],[129,22,116,22],[129,23,116,23],[130,4,117,4],[130,10,117,10,"ExpoTaskManager"],[130,34,117,25],[130,35,117,26,"unregisterTaskAsync"],[130,54,117,45],[130,55,117,46,"taskName"],[130,63,117,54],[130,64,117,55],[131,2,118,0],[132,2,119,0],[133,2,120,0],[134,0,121,0],[135,0,122,0],[136,0,123,0],[137,0,124,0],[138,2,125,7],[138,17,125,22,"unregisterAllTasksAsync"],[138,40,125,45,"unregisterAllTasksAsync"],[138,41,125,45],[138,43,125,48],[139,4,126,4],[139,8,126,8],[139,9,126,9,"ExpoTaskManager"],[139,33,126,24],[139,34,126,25,"unregisterAllTasksAsync"],[139,57,126,48],[139,59,126,50],[140,6,127,8],[140,12,127,14],[140,16,127,18,"UnavailabilityError"],[140,52,127,37],[140,53,127,38],[140,66,127,51],[140,68,127,53],[140,93,127,78],[140,94,127,79],[141,4,128,4],[142,4,129,4],[142,10,129,10,"ExpoTaskManager"],[142,34,129,25],[142,35,129,26,"unregisterAllTasksAsync"],[142,58,129,49],[142,59,129,50],[142,60,129,51],[143,2,130,0],[144,2,131,0],[144,6,131,4,"ExpoTaskManager"],[144,30,131,19],[144,32,131,21],[145,4,132,4],[145,10,132,10,"eventEmitter"],[145,22,132,22],[145,25,132,25],[145,29,132,29,"LegacyEventEmitter"],[145,64,132,47],[145,65,132,48,"ExpoTaskManager"],[145,89,132,63],[145,90,132,64],[146,4,133,4,"eventEmitter"],[146,16,133,16],[146,17,133,17,"addListener"],[146,28,133,28],[146,29,133,29,"ExpoTaskManager"],[146,53,133,44],[146,54,133,45,"EVENT_NAME"],[146,64,133,55],[146,66,133,57],[146,73,133,64],[147,6,133,66,"data"],[147,10,133,70],[148,6,133,72,"error"],[148,11,133,77],[149,6,133,79,"executionInfo"],[150,4,133,93],[150,5,133,94],[150,10,133,99],[151,6,134,8],[151,12,134,14],[152,8,134,16,"eventId"],[152,15,134,23],[153,8,134,25,"taskName"],[154,6,134,34],[154,7,134,35],[154,10,134,38,"executionInfo"],[154,23,134,51],[155,6,135,8],[155,12,135,14,"taskExecutor"],[155,24,135,26],[155,27,135,29,"tasks"],[155,32,135,34],[155,33,135,35,"get"],[155,36,135,38],[155,37,135,39,"taskName"],[155,45,135,47],[155,46,135,48],[156,6,136,8],[156,10,136,12,"result"],[156,16,136,18],[156,19,136,21],[156,23,136,25],[157,6,137,8],[157,10,137,12,"taskExecutor"],[157,22,137,24],[157,24,137,26],[158,8,138,12],[158,12,138,16],[159,10,139,16],[160,10,140,16,"result"],[160,16,140,22],[160,19,140,25],[160,25,140,31,"taskExecutor"],[160,37,140,43],[160,38,140,44],[161,12,140,46,"data"],[161,16,140,50],[162,12,140,52,"error"],[162,17,140,57],[163,12,140,59,"executionInfo"],[164,10,140,73],[164,11,140,74],[164,12,140,75],[165,8,141,12],[165,9,141,13],[165,10,142,12],[165,17,142,19,"error"],[165,22,142,24],[165,24,142,26],[166,10,143,16,"console"],[166,17,143,23],[166,18,143,24,"error"],[166,23,143,29],[166,24,143,30],[166,46,143,52,"taskName"],[166,54,143,60],[166,65,143,71],[166,67,143,73,"error"],[166,72,143,78],[166,73,143,79],[167,8,144,12],[167,9,144,13],[167,18,145,20],[168,10,146,16],[169,10,147,16],[169,16,147,22,"ExpoTaskManager"],[169,40,147,37],[169,41,147,38,"notifyTaskFinishedAsync"],[169,64,147,61],[169,65,147,62,"taskName"],[169,73,147,70],[169,75,147,72],[170,12,147,74,"eventId"],[170,19,147,81],[171,12,147,83,"result"],[172,10,147,90],[172,11,147,91],[172,12,147,92],[173,8,148,12],[174,6,149,8],[174,7,149,9],[174,13,150,13],[175,8,151,12,"console"],[175,15,151,19],[175,16,151,20,"warn"],[175,20,151,24],[175,21,151,25],[175,43,151,47,"taskName"],[175,51,151,55],[175,185,151,189],[175,186,151,190],[176,8,152,12],[177,8,153,12],[177,14,153,18,"ExpoTaskManager"],[177,38,153,33],[177,39,153,34,"notifyTaskFinishedAsync"],[177,62,153,57],[177,63,153,58,"taskName"],[177,71,153,66],[177,73,153,68],[178,10,153,70,"eventId"],[178,17,153,77],[179,10,153,79,"result"],[180,8,153,86],[180,9,153,87],[180,10,153,88],[181,8,154,12],[182,8,155,12],[183,8,156,12],[183,14,156,18,"ExpoTaskManager"],[183,38,156,33],[183,39,156,34,"unregisterTaskAsync"],[183,58,156,53],[183,59,156,54,"taskName"],[183,67,156,62],[183,68,156,63],[184,6,157,8],[185,4,158,4],[185,5,158,5],[185,6,158,6],[186,2,159,0],[187,2,160,0],[188,2,161,0],[189,0,162,0],[190,0,163,0],[191,0,164,0],[192,0,165,0],[193,0,166,0],[194,0,167,0],[195,2,168,7],[195,17,168,22,"isAvailableAsync"],[195,33,168,38,"isAvailableAsync"],[195,34,168,38],[195,36,168,41],[196,4,169,4],[196,11,169,11,"ExpoTaskManager"],[196,35,169,26],[196,36,169,27,"isAvailableAsync"],[196,52,169,43],[196,53,169,44],[196,54,169,45],[197,2,170,0],[198,0,170,1],[198,3]],"functionMap":{"names":["<global>","_validate","defineTask","isTaskDefined","isTaskRegisteredAsync","getTaskOptionsAsync","getRegisteredTasksAsync","unregisterTaskAsync","unregisterAllTasksAsync","eventEmitter.addListener$argument_1","isAvailableAsync"],"mappings":"AAA;ACG;CDI;OEY;CFU;OGO;CHE;OIS;CJM;OKU;CLM;OM2B;CNK;OOU;CPM;OQO;CRK;yDSG;KTyB;OUU;CVE"}},"type":"js/module"}]}